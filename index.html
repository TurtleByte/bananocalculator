<html lang="en">
<head>
	<title>Banano Calculator</title>
	<meta name="description" content="This is how many Banano for your points. Stop asking. This is it. Just put in the numbers and you'll get your answer." />
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"></head>
	
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-FSYSR80F3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-FSYSR80F3P');
	</script>
<body onload="createTable(infoTableArray)">

<div class="container">
	<div class="row">
		<div class="col-sm-8">
			<h1>F@H Points-to-Banano Calculator<br>
				<small>There Is No Ratio</small>
			</h1>
			<div class="row">
				<div class="col-sm-3">
					<label class="col-2 col-form-label">
						<select id="pointsMode" class="form-control" oninput="updateValues()">
							<option value="pp">Pending Points</option>
							<option value="ppd">Points Per Day</option>
						</select>
					</label>
						<div class="col-2">
							<input class="form-control" type="number" min="0" step="1000" value="0" id="pendingpoints" oninput="updateValues()">
							<span id="text">Estimates are for next payout.</span>
						</div>
					<br>
					<label class="col-2 col-form-label">Vertical Shift</label>
						<div class="col-2">
							<input class="form-control" type="number" min="0" step="0.0001" value="0.0361" id="banprice" oninput="updateValues()">
							(Defaulted to Latest Known Shift)
						</div>
				</div>
				<div class="col-sm-3">
					<h2 align="center">
						<span id="output">???</span>
						<br>
						<small>Main Curve Estimate</small>
					</h2>
					<p align="center">Roughly ~43% of all payouts are ±1 BAN on this estimate. ~65% are ±1.5 BAN.</p>
				</div>
				<div class="col-sm-3">
					<h2 align="center">
						<span id="output2">???</span>
						<br>
						<small>Nerfed Curve Estimate</small>
					</h2>
					<p align="center">An additional ~6% of all payouts are ±1 BAN on this estimate. </p>
				</div>
				<div class="col-sm-3">
					<h2 align="center">
						<span id="floorOutput">???</span>
						<br>
						<small>Floor Curve Estimate</small>
					</h2>
					<p align="center">>99% of all payouts are above this curve.</p>
				</div>
			</div>
			<div class="row">
				<p>
				"Pending Points" are the points you have accumulated since the last time you were paid by BananoMiner. You can find out how many pending points you have by going to <a href="https://www.monkey2monkey.com/fh-stats/">Monkey2Monkey.com</a>. "Points Per Day" calculations are done on the assumption that the points are evenly distributed among the 2 12-hour pay periods that typically happen in one day. <b>If your payouts are not accurately depicted here, you are either "Off-Curve" or the payout equation has significantly changed. There is currently no way to reliably predict Off-Curve payouts.</b>
				</p>
				<p>If you'd like to donate some BAN, click <button class="btn" onclick="addressToClipboard()">here</button> to copy my BAN address to your clipboard.
			</div>
		</div>
		<div class="col-sm-4">
			<br>
			<table class="table table-striped" >
				<thead>
				  <tr>
					<th>Payout</th>
					<th>Folders</th>
					<th>BAN Distributed</th>
				  </tr>
				</thead>
				<tbody id="infoTable">
				</tbody>
			</table>
		</div>
	</div>
</div>

<script>
$(document).ready(function(){
	$('[data-toggle="popover"]').popover(); 
});

let pendingPointsElement = document.getElementById("pendingpoints");
let banPriceElement = document.getElementById("banprice");
let pointsModeElement = document.getElementById("pointsMode");

function updateValues(){
	if (pointsModeElement.value == "pp") {
		pendingPoints = parseFloat(pendingPointsElement.value);
	} else if (pointsModeElement.value == "ppd") {
		pendingPoints = parseFloat(pendingPointsElement.value) / 2;
	};
	
	console.log(pendingPoints)
	banPrice = parseFloat(banPriceElement.value);
	
	if(pendingPoints > 740000){
		output = ((1/(-0.05655 + (0.9598 * (1/Math.log(pendingPoints))))) - 3.3009 - Math.log(banPrice)).toFixed(2);
	} else if (pendingPoints >= 300000) {
		output = Math.exp(-5.0657 - Math.log(banPrice) + (0.4414 * Math.log(pendingPoints))).toFixed(2);
	} else if (pendingPoints >= 150000) {
		output = Math.exp(-6.0370 - Math.log(banPrice) + (0.5223 * Math.log(pendingPoints))).toFixed(2);
	} else if (pendingPoints >= 30000) {
		output = Math.exp(-7.3263 - Math.log(banPrice) + (0.6380 * Math.log(pendingPoints))).toFixed(2);
	} else {
		output = Math.exp(-9.5797 - Math.log(banPrice) + (0.8545 * Math.log(pendingPoints))).toFixed(2);
	}
	if (output < 9.85) {
		output = 9.85
	}
	
	let output2 = Math.exp(-15.8968 - Math.log(banPrice) + (17.6 * Math.log(Math.log(Math.log(pendingPoints))))).toFixed(2);
	if(output2 < 9.85){
		output2 = 9.85;
	} else if (output2 > output) {
		output2 = output
	}
	
	let floorOutput = Math.exp(-10.24 + Math.log(banPrice) + (17.6 * Math.log(Math.log(Math.log(pendingPoints))))).toFixed(2);
	
	if (pointsModeElement.value == "ppd") {
		output = output * 2;
		output2 = output2 * 2;
		floorOutput = floorOutput * 2;
	}
	
	document.getElementById("output").innerHTML = output + " BAN";
	document.getElementById("output2").innerHTML = output2 + " BAN";
	document.getElementById("floorOutput").innerHTML = floorOutput + " BAN";
	
	if (pointsModeElement.value == "ppd") {
		document.getElementById("text").innerHTML = "Estimates are in BAN per Day.";
	} else {
		document.getElementById("text").innerHTML = "Estimates are for next payout.";
	}
}

let infoTableArray = [
	['Payout','Folders', 'BAN Distributed'],
	['12-May-2021 PM', 7780, 237559.46],
	['12-May-2021 AM', 8359, 253939.66],
	['11-May-2021 PM', 7766, 238809.02],
	['11-May-2021 AM', 7923, 246945.97],
	['10-May-2021 PM', 8000, 242639.34],
	['10-May-2021 AM', 7876, 238908.12],
	['09-May-2021 PM', 8904, 322268.32]
	/*
	['09-May-2021 AM', 'None'],
	['08-May-2021 AM/PM', 0.036700],
	['07-May-2021 AM/PM', 0.030337]
	*/
]

//makes an HTML table from the array
	function createTable(array) {
		for(var i = 1; i < array.length ; i++){
			var row = document.createElement('tr');
			row.setAttribute("id", "myTr" + i);
			document.getElementById("infoTable").appendChild(row);
			for(var j = 0; j < array[i].length; j++){
				var cell = document.createElement('td');
				var content = document.createTextNode(array[i][j]);
				cell.appendChild(content);
				document.getElementById("myTr" + i).appendChild(cell);
			};
		};
	};
	
	function addressToClipboard(){
		var promise = navigator.clipboard.writeText('ban_3r7xbz8u5wj4wgkhmojzq6mmiq7ekawtarnfgwsneeck8ktn6zy58ax3ejkn')
	}

</script>
</body>
</html>