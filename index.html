<html lang="en">
<head>
	<title>Banano Calculator</title>
	<meta name="description" content="This is how many Banano for your points. Stop asking. This is it. Just put in the numbers and you'll get your answer." />
	<meta charset="utf-8">
	<meta name="viewport" content="width=device-width, initial-scale=1">
	<script src="https://code.jquery.com/mobile/1.4.5/jquery.mobile-1.4.5.min.js"></script>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
	<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/js/bootstrap.min.js"></script>
	<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.5/css/bootstrap.min.css"></head>
	
	<!-- Global site tag (gtag.js) - Google Analytics -->
	<script async src="https://www.googletagmanager.com/gtag/js?id=G-FSYSR80F3P"></script>
	<script>
	  window.dataLayer = window.dataLayer || [];
	  function gtag(){dataLayer.push(arguments);}
	  gtag('js', new Date());

	  gtag('config', 'G-FSYSR80F3P');
	</script>
<body>

<!-- Page Content -->
	<div class="container-fluid stuff col-md-4"></div>
		<div class="container-fluid stuff col-md-8">
			<div class="row">
				<div class="col-lg-8">
					<h1>Banano Calculator<br>
						<small>Because you asked for it.</small>
					</h1>
				</div>
			</div>
			<br>
			<div class="row">
				<div class="col-md-2">
					<label class="col-2 col-form-label">Pending Points</label>
						<div class="col-2">
							<input class="form-control" type="number" min="0" step="100" value="0" id="pendingpoints" oninput="updateValues()">
						</div>
					<br>
					<label class="col-2 col-form-label">Ban Price (USD)</label>
						<div class="col-2">
							<input class="form-control" type="number" min="0" step="0.0001" value="0.3034" id="banprice" oninput="updateValues()">
						</div>
				</div>
				<div class="col-md-2">
					<h2 align="center">
						<span id="output">???</span>
						<br>
						<small>Main Curve Estimate</small>
					</h2>
					<p align="center">Roughly ~60% of all payouts lie on this curve.</p>
				</div>
				<div class="col-md-2">
					<h2 align="center">
						<span id="output2">???</span>
						<br>
						<small>Nerfed Curve Estimate</small>
					</h2>
					<p align="center">An additional ~7% of all payouts lie on this curve.</p>
				</div>
			</div>
			<div class="col-md-6">
			<br>
			If your payouts are not accurately depicted here despite a correct price value and correct point total, you are either "Off-Curve" or the payout equation has significantly changed. There is currently no way to reliably predict Off-Curve payouts.
			</div>
		</div>
</div>

	<script>
	$(document).ready(function(){
		$('[data-toggle="popover"]').popover(); 
	});
	
	let pendingPointsElement = document.getElementById("pendingpoints");
	let banPriceElement = document.getElementById("banprice");
	let output = 0;
	
	function updateValues(){
		pendingPoints = parseFloat(pendingPointsElement.value);
		banPrice = parseFloat(banPriceElement.value);
		
		if (pendingPoints >= 300000) {
			output = Math.exp(-5.0657 - Math.log(banPrice) + (0.4414 * Math.log(pendingPoints))).toFixed(2);
		} else if (pendingPoints >= 150000) {
			output = Math.exp(-6.0370 - Math.log(banPrice) + (0.5223 * Math.log(pendingPoints))).toFixed(2);
		} else if (pendingPoints >= 30000) {
			output = Math.exp(-7.3263 - Math.log(banPrice) + (0.6380 * Math.log(pendingPoints))).toFixed(2);
		} else {
			output = Math.exp(-9.5797 - Math.log(banPrice) + (0.8545 * Math.log(pendingPoints))).toFixed(2);
		}
		if (output < 9.85) {
			output = 9.85
		}
		
		let output2 = Math.exp(-19.045 - Math.log(banPrice) + (7.7 * Math.log(Math.log(pendingPoints)))).toFixed(2);
		if(output2 < 9.85){
			output2 = 9.85;
		}
		
		document.getElementById("output").innerHTML = output + " BAN";
		document.getElementById("output2").innerHTML = output2 + " BAN";
	}
	
	</script>

	<script type="text/javascript" src="main.js"></script>	
</body>
</html>